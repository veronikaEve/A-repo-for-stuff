name: Mark stale PRsAdd commentMore actions

on:
  pull_request_target:
    types: [opened, reopened, synchronize, labeled, unlabeled, edited]
  workflow_dispatch: # Allow manual triggering
  schedule:
    # Run every 2 minutes for testing
    - cron: "*/2 * * * *"

jobs:
  stale:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write

    steps:
      - uses: actions/stale@v9
        with:
          days-before-pr-stale: 0.007 # 10 minutes (easier to test)

          stale-pr-message: |
            üïê **Stale PR Reminder**

            This PR has been inactive for 5 minutes. To keep the momentum going:

            - [ ] Review and address any feedback
            - [ ] Rebase if needed to resolve conflicts  
            - [ ] Add any missing tests or documentation
            - [ ] Request review if ready

            If this PR is no longer needed, please close it.

            *Remove the stale label or add a comment to reset the timer.*

          stale-pr-label: "stale"

          exempt-draft-pr: true

          # Don't auto-close stale PRs (set to -1)
          days-before-pr-close: 0.021 # 30 minutes after stale

          close-pr-message: |
            üóëÔ∏è **PR Closed**

            This PR has been inactive for 10 minutes and has been closed. If you still need this PR, please reopen it.

          exempt-pr-labels: "no-stale-check,keep-open,work-in-progress"

          remove-stale-when-updated: true
